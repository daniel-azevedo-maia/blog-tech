<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Blog Tech - Novo Usuário</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

</head>
<body>

<nav class="navbar navbar-expand-lg navbar navbar-dark bg-dark">

    <!--Cria menu hamburguer na responsividade-->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01"
            aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <!------------------------NAVEGAÇÃO SUPERIOR------------------------>

    <div class="collapse navbar-collapse" id="navbarTogglerDemo01">

        <a class="navbar-brand" href="#">BLOG TECH</a>

        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">

            <li class="nav-item active">
                <a class="nav-link" href="/index.html">Página inicial <span class="sr-only">(current)</span></a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="#">Artigos</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="#">Vídeos</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="#">Downloads</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="#">Quem somos</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="#">Contato</a>
            </li>

        </ul>

        <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Pesquisar" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Pesquisar</button>
        </form>
    </div>

</nav>

<!------------------------CORPO DA PÁGINA------------------------>

<h1>Cadastro de novo usuário</h1>

<h2 class="mb-3">Informações pessoais</h2>

<form action="/usuario/cadastrar" method="POST" th:object="${usuarioobj}" id="formusuario">

    <div class="form-group">
        <label for="nome">Nome</label>
        <input type="text" th:field="*{nome}" class="form-control" id="nome" placeholder="Informe o seu nome" required>
    </div>

    <div class="form-group">
        <label for="sobrenome">Sobrenome</label>
        <input type="text" th:field="*{sobrenome}" class="form-control" id="sobrenome"
               placeholder="Informe o seu sobrenome" required>
    </div>

    <div class="form-group">
        <label for="email">E-mail</label>
        <input type="email" th:field="*{email}" class="form-control" id="email" placeholder="seuemail@email.com"
               required>
    </div>


    <div class="form-group">
        <label for="cep">CEP</label>
        <input name="cep" type="text" th:field="*{endereco.cep}" class="form-control" id="cep" onblur="pesquisacep(this.value);">
    </div>

    <div class="form-group">
        <label for="logradouro">Rua</label>
        <input name="logradouro" type="text" th:field="*{endereco.logradouro}" class="form-control" id="logradouro">
    </div>

    <div class="form-group">
        <label for="numero">Número</label>
        <input name="numero" type="text" th:field="*{endereco.numero}" class="form-control" id="numero">
    </div>

    <div class="form-group">
        <label for="complemento">Complemento</label>
        <input name="complemento" type="text" th:field="*{endereco.complemento}" class="form-control" id="complemento">
    </div>

    <div class="form-group">
        <label for="bairro">Bairro</label>
        <input name="bairro" type="text" th:field="*{endereco.bairro}" class="form-control" id="bairro">
    </div>

    <div class="form-group">
        <label for="cidade">Cidade</label>
        <input name="cidade" type="text" th:field="*{endereco.cidade}" class="form-control" id="cidade">
    </div>

    <div class="form-group">
        <label for="uf">Estado</label>
        <input name="uf" type="text" th:field="*{endereco.uf}" class="form-control" id="uf">
    </div>


    <h2 class="mt-4 mb-3">Detalhes da conta</h2>

    <div class="form-group">
        <label for="login">Login</label>
        <input type="text" th:field="*{login}" class="form-control" id="login" placeholder="Informe um login válido"
               required>
    </div>

    <div class="form-group">
        <label for="senha">Senha</label>
        <input type="password" th:field="*{senha}" class="form-control" id="senha" placeholder="Informe uma senha"
               required>
    </div>

    <div class="form-group">
        <label for="confirmarSenha">Confirme a senha</label>
        <input type="password" class="form-control" id="confirmarSenha" placeholder="Confirme a senha" required>
    </div>

    <div class="form-group mt-4">
        <input type="submit" class="btn btn-success" value="Cadastrar novo usuário">
        <a href="/" class="btn btn-primary">Voltar</a>
    </div>


</form>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

<!-- Adicionando Javascript -->
<script>

    function limpa_formulário_cep() {

            //Limpa valores do formulário de cep.
            document.getElementById('logradouro').value=("");
            document.getElementById('bairro').value=("");
            document.getElementById('cidade').value=("");
            document.getElementById('uf').value=("");

    }

    function meu_callback(conteudo) {
        if (!("erro" in conteudo)) {
            //Atualiza os campos com os valores.
            document.getElementById('logradouro').value=(conteudo.logradouro);
            document.getElementById('bairro').value=(conteudo.bairro);
            document.getElementById('cidade').value=(conteudo.localidade);
            document.getElementById('uf').value=(conteudo.uf);

        } //end if.
        else {
            //CEP não Encontrado.
            limpa_formulário_cep();
            alert("CEP não encontrado.");
        }
    }

    function pesquisacep(valor) {

        //Nova variável "cep" somente com dígitos.
        var cep = valor.replace(/\D/g, '');

        //Verifica se campo cep possui valor informado.
        if (cep != "") {

            //Expressão regular para validar o CEP.
            var validacep = /^[0-9]{8}$/;

            //Valida o formato do CEP.
            if(validacep.test(cep)) {

                //Preenche os campos com "..." enquanto consulta webservice.
                document.getElementById('logradouro').value="...";
                document.getElementById('bairro').value="...";
                document.getElementById('cidade').value="...";
                document.getElementById('uf').value="...";

                //Cria um elemento javascript.
                var script = document.createElement('script');

                //Sincroniza com o callback.
                script.src = 'https://viacep.com.br/ws/'+ cep + '/json/?callback=meu_callback';

                //Insere script no documento e carrega o conteúdo.
                document.body.appendChild(script);

            } //end if.
            else {
                //cep é inválido.
                limpa_formulário_cep();
                alert("Formato de CEP inválido.");
            }
        } //end if.
        else {
            //cep sem valor, limpa formulário.
            limpa_formulário_cep();
        }
    };

</script>

</body>

</html>